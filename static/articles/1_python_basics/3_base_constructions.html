<!DOCTYPE html>
<html>
<meta charset="UTF-8">
  <head>
    <title>
Основные конструкции | Энциклопедия devman
</title>
    <link rel="stylesheet" href="../../css/codehilite.css" type='text/css' media='all'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <link rel="stylesheet" href="../../css/styles.css"/>
  </head>
  <body>
      <div class="container">
          <!-- Блок контента-->
          <div class="row">
            <!-- Основной блок-->
            <div class="col-md-9">
              
<div class="row">
    <div class="col-md-12">
      <h2><a href="../../../index.html">Энциклопедия devman</a></h2>
      <hr>
      <h2>Основные конструкции</h2>
      <span class="label label-default">Основы Питона</span>
      <p><h3>Коротко о главных управляющих конструкциях</h3>
<p>Сейчас мы совсем реактивно пройдёмся по самым основным управляющим конструкциям. Гет реди.</p>
<h3>if</h3>
<p>Ну, вы все знаете условный оператор, так ведь?</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Никаких тебе сигарет. Ишь чего удумал!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Вам синий или красный?&#39;</span><span class="p">)</span>
</pre></div>


<p>Есть ещё <code>elif</code>, их можно сделать много в одном операторе. Это такой аналог <code>which</code> из других языков.</p>
<h3>for</h3>
<p>Цикл. Вместо сишного варианта с init, cond и loop выражениями, тут просто итерация по коллекции:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">user</span>
</pre></div>


<p>Иногда надо не пройтись по списку, а выполнить одну и ту же операцию много раз. Тогда хорошо подходит функция
<a href="https://docs.python.org/3.5/library/functions.html#func-range">range</a>. Она возвращает целые числа в заданном промежутке,
поэтому в цикле её можно использовать так:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">level_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">user</span><span class="o">.</span><span class="n">levelup</span><span class="p">()</span>  <span class="c1"># пользователь получит десять уровней. Читер!</span>
</pre></div>


<p>А вот <code>break</code> и <code>continue</code> делают то же, что в Паскале и Сях. <code>break</code> прерывает выполнение цикла,
<code>continue</code> завершает текущую итерацию и переходит к следующей.</p>
<p>Ещё у цикла есть <code>else</code>, но про него почти никто не знает. Как он работает можно посмотреть
<a href="https://docs.python.org/3.5/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops">в официальной документации</a>.</p>
<h3>def</h3>
<p>Начало объявления функции. После него идёт название,
потом – аргументы функции в скобках, двоеточие и тело функции с отступом:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_square</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>


<p>То, что после <code>return</code> – это возвращаемое значение функции.</p>
<p>Функцию создали, вот как её теперь использовать:</p>
<div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>  <span class="c1"># 4</span>
<span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>  <span class="c1"># 36</span>
<span class="k">print</span><span class="p">(</span><span class="n">get_square</span><span class="p">(</span><span class="s1">&#39;ыыы&#39;</span><span class="p">))</span>  <span class="c1"># всё сломается</span>
</pre></div>


<p>А вот пример посложнее, из исходников Девмана. Получает пользователя по айди в Слаке:</p>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_get_user_by_slack_id</span><span class="p">(</span><span class="n">slack_user_id</span><span class="p">):</span>
    <span class="n">user_email</span> <span class="o">=</span> <span class="n">get_slack_email_for_user</span><span class="p">(</span><span class="n">slack_user_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email__iexact</span><span class="o">=</span><span class="n">user_email</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre></div>


<p>(вот почему емейл необходим)</p>
<h3>range</h3>
<p>Функция очень полезная, поэтому про неё отдельно. <code>range</code> генерирует целые числа в заданном диапазоне. Например:</p>
<div class="codehilite"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># 0..0</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 5..9</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># [5, 7, 9] (от пяти до девяти с шагом два)</span>
</pre></div>


<p>Фишка этой функции заключается в том, что она не создаёт список со всеми числами.
Вместо этого он вернёт объект, который будет возвращать элементы как только они нужны, по одному.
Поэтому код <code>range(9999999999999)</code> не съест всю память.
Этот хитрый объект (Sequence ABC, но об этом потом) можно превратить в список явно:</p>
<div class="codehilite"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9999999999999</span><span class="p">))</span>
</pre></div>


<p>(не советую так делать)</p>
<h3>pass</h3>
<p>Блок, который ничего не делает:</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="k">pass</span>  <span class="c1"># 20 раз сделать ничего. Очень полезно!</span>
</pre></div>


<p>Часто используется в начальном коде для заданий: в финальной версии вместо <code>pass</code> должен быть настоящий код.</p></p>
      <br>
      <a href="../../../index.html">На главную</a>
    </div>
</div>

            </div>
            <!--Правый блок-->
            <div class="col-md-3">
            </div>
          </div>
          <!-- Подвал сайта-->
          <br>
          <div class="row">
            <div class="col-md-9">
              <hr>
              <p class="text-left">&copy; Copyright 2016 by aleksei-g.</p>
            </div>
          </div>
      </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.5/ace.js"></script>
   <script>

        $('.question_options li').click(function(e) {
            $(e.target).closest('ul').find('li').removeClass('selected');
            $(e.target).closest('ul').find('.answer-result').remove();
            $(e.target).addClass('selected');
            if($(e.target).hasClass('correct')) {
                $(e.target).append('<i class="glyphicon glyphicon-ok right answer-result green"/>')
            } else {
                $(e.target).append('<i class="glyphicon glyphicon-remove right answer-result red"/>')

            }
        });

        $('body').on('click', '.checkTask', function(e) {
            var $btn = $(e.target),
                editorWrapper = $btn.closest('.editor_wrapper'),
                editorId = editorWrapper.find('.editor')[0].id,
                editor = ace.edit(editorId),
                solution = editorWrapper.find('.solution').text(),
                text = editor.getValue().replace(/^\s+|\s+$/g, ''),
                isCorrect = text == solution;

            $(editorWrapper).find('.answer-result').remove();
            if(isCorrect) {
                $btn.after('<i class="glyphicon glyphicon-ok green answer-result"/>')
            } else {
                $btn.after('<i class="glyphicon glyphicon-remove red answer-result"/>')
            }

        });

        $('.editor').each(function(num, editor) {
            var editorSizes = {
                    small: 3,
                    medium: 10,
                    large: 20
                },
                editorId = editor.id,
                $editor = $(editor),
                $actionsWrapper = $editor.closest('.editor_wrapper').find('.editor_actions'),
                editorLinesAmount = null;

            _.each(Object.keys(editorSizes), function(class_name) {
                if($editor.hasClass(class_name)) {
                    editorLinesAmount = editorSizes[class_name];
                }
            });

            $actionsWrapper.append('<button class="btn btn-default btn-sm checkTask">Проверить</button>')

            var editor = ace.edit(editorId);
            editor.setOptions({
                maxLines: editorLinesAmount,
                fontSize: '18px'
            });
            editor.setTheme("ace/theme/github");
            editor.getSession().setMode("ace/mode/python");
            editor.renderer.setShowGutter(false);
        });

    </script>
  </body>
</html>